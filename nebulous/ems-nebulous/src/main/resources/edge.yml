#
# Copyright (C) 2023-2025 Institute of Communication and Computer Systems (imu.iccs.gr)
#
# This Source Code Form is subject to the terms of the Mozilla Public License, v2.0.
# If a copy of the MPL was not distributed with this file, you can obtain one at
# https://www.mozilla.org/en-US/MPL/2.0/
#

apiVersion: nebulous/v1
kind: MetricModel
metadata:
  name: 'Edge-device Nebulous metric model'
spec:
  components:
    - name: dummy-component-for-edge-devices
      components: '*'
      metrics:
        - name: edge_cpu_avg
          formula: 'mean( edge_cpu_instant )'
          window: 'sliding 5 min'
          output: 'all 1 min'
        - name: edge_cpu_instant
          sensor:
            type: 'netdata'
            config:
              scope_contexts: 'system.cpu'
              results-aggregation: 'SUM'
